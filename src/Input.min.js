/*
 * Input.js – Part of FIL (The Front-end Interactive Libraries)
 * Copyright (c) 2012, Danny Garcia. All rights reserved.
 * Code licensed under the MIT License
 * https://github.com/dannygarcia/fil/
 */(function(e){"use strict";var t=function(){var e={element:document.body,preventDefault:!1,ratio:!1,forceTouch:!1,type:"object"},t=1,n=!1,r=!1,i=function(e,t){var n,r,i;return typeof t=="string"&&(n=e[t],t=e,e=n),typeof e!="function"?undefined:(r=Array.prototype.slice.call(arguments,2),i=function(){return e.apply(t,r.concat(Array.prototype.slice.call(arguments)))},i.guid=e.guid=e.guid||i.guid,i)};return{inputs:[],average:{},init:function(n){return typeof n!="undefined"&&this.options(n),typeof window.devicePixelRatio!="undefined"&&e.ratio&&(t=window.devicePixelRatio),r=e.forceTouch||this.supportsTouch(),this.bindAllInputs(),this},options:function(t){if(typeof t=="undefined")return e;for(var n in e)e.hasOwnProperty(n)&&typeof t[n]!="undefined"&&(e[n]=t[n])},setCoordinates:function(n){e.preventDefault&&n.preventDefault();var i=[],s=e.type==="object"?{x:0,y:0}:[0,0];if(r)for(var o=0;o<n.touches.length;o++)i[o]=e.type==="object"?{x:n.touches[o].pageX*t,y:n.touches[o].pageY*t}:[n.touches[o].pageX*t,n.touches[o].pageY*t],e.type==="object"?(s.x+=i[o].x,s.y+=i[o].y):(s[0]+=i[o][0],s[1]+=i[o][1]);else i[0]=e.type==="object"?{x:n.pageX*t,y:n.pageY*t}:[n.pageX*t,n.pageY*t],s=i[0];this.inputs=i,this.average=e.type==="object"?{x:Math.ceil(s.x/i.length),y:Math.ceil(s.y/i.length)}:[Math.ceil(s[0]/i.length),Math.ceil(s[1]/i.length)]},bindAllInputs:function(){n=!0,this.bindTapStart(),this.bindTapMove(),this.bindTapEnd()},unbindAllInputs:function(){n&&(this.unbindTapStart(),this.unbindTapMove(),this.unbindTapEnd()),n=!1},bindTapStart:function(){var t=this.getEventType("start");e.element.addEventListener(t,i(this.tapStart,this),!1)},tapStart:function(e){this.setCoordinates(e,"start"),this.ontapstart(this.average,this.inputs)},ontapstart:function(e,t){},unbindTapStart:function(){var t=this.getEventType("start");e.element.removeEventListener(t,i(this.tapStart,this),!1)},bindTapMove:function(){var t=this.getEventType("move");e.element.addEventListener(t,i(this.tapMove,this),!1)},tapMove:function(e){this.setCoordinates(e,"move"),this.ontapmove(this.average,this.inputs)},ontapmove:function(e,t){},unbindTapMove:function(){var t=this.getEventType("move");e.element.removeEventListener(t,i(this.tapMove,this),!1)},bindTapEnd:function(){var t=this.getEventType("end");e.element.addEventListener(t,i(this.tapEnd,this),!1)},tapEnd:function(e){this.setCoordinates(e,"end"),this.ontapend(this.average,this.inputs)},ontapend:function(e,t){},unbindTapEnd:function(){var t=this.getEventType("end");e.element.removeEventListener(t,i(this.tapEnd,this),!1)},getEventType:function(e){var t=r?"touch":"mouse";return e==="start"&&!r?e="down":e==="end"&&!r&&(e="up"),t+e},supportsTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch},destroy:function(){this.unbindAllInputs()}}};e.Input=t,typeof this.define=="function"&&this.define.amd&&this.define("Input",[],function(){return e.Input})}).call(this,function(){return this.fil=this.fil||{},this.fil}.call(this));