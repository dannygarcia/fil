<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>fil : Front-end Interactive Libraries</title>
	<meta name="author" content="Danny Garcia">

	<link rel="stylesheet" href="style.css">
	<script src="libs/modernizr-2.5.3.min.js"></script>

</head>
<body><div id="canvas"></div>

	<script data-main="src/" src="libs/require.js"></script>
	<script>

		// Development
		require.config({
			urlArgs : "cacheBust=" + (new Date()).getTime()
		});

		require(["Canvas", "Input", "Pen", "Frame"], function (canvas, input, pen, frame) {

			var canvasNode = document.getElementById('canvas');

			canvas.init({
				container : canvasNode
			});

			var ctx = canvas.context();

			ctx.fillStyle = 'rgba(234, 46, 73, 1)';
			ctx.fillRect(0, 0, canvas.width, canvas.height);
			ctx.fillStyle = ctx.strokeStyle = 'rgba(218,237,226,0.5)';

			pen.context(ctx);

			input.init({
				element : canvasNode,
				preventDefault : true
			});

			frame.start();

			var prev = {},
				curr = {};

			input.ontapstart = function (average) {
				pen.circle(average, 10);
			};

			input.ontapmove = function (average) {
				curr = average;
			};

			input.ontapend = function (average) {
				pen.circle(average, 10);
			};

			frame.step = function (f) {
				pen.circle(curr, 5);
				pen.line(prev, curr);
				prev = curr;
			};

		});
	</script>

</body>
</html>
